package org.example.model.entity;

import javax.validation.constraints.Min;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * Модель товара магазина.
 * <p>
 * Представляет продукт с основными характеристиками: название, количество, цена, категория.
 * Используется в каталоге товаров, корзинах пользователей и заказах.
 * Все экземпляры являются immutable после создания, за исключением обновления через сеттеры.
 * </p>
 *
 * <h3>Валидация:</h3>
 * <ul>
 *   <li>Название товара обязательно</li>
 *   <li>Количество и цена не могут быть отрицательными</li>
 *   <li>Категория должна быть указана</li>
 * </ul>
 *
 * @see Category
 * @since 1.0
 */
@Getter
@Setter
@NoArgsConstructor
public class Product {

    /**
     * Уникальный идентификатор товара.
     * <p>
     * Генерируется автоматически при сохранении в базу данных.
     * Используется как первичный ключ в таблице товаров.
     * </p>
     */
    private Long id;

    /**
     * Название товара.
     * <p>
     * Должно быть уникальным в пределах каталога (бизнес-правило).
     * Используется для поиска и отображения товаров.
     * </p>
     */
    @NotBlank(message = "Название товара обязательно")
    private String name;

    /**
     * Количество товара в наличии.
     * <p>
     * Указывает на доступное количество единиц товара на складе.
     * Используется для контроля остатков и предотвращения продажи
     * отсутствующего товара.
     * </p>
     */
    @Min(value = 0, message = "Количество товара не может быть отрицательным")
    private int quantity;

    /**
     * Цена товара в минимальных единицах валюты (копейки, центы).
     * <p>
     * Хранится как целое число для избежания ошибок округления.
     * Для отображения может быть преобразована в дробное значение.
     * </p>
     */
    @Min(value = 0, message = "Цена товара не может быть отрицательной")
    private int price;

    /**
     * Идентификатор категории товара.
     * <p>
     * Внешний ключ на таблицу категорий. Определяет принадлежность
     * товара к определенной группе для организации каталога.
     * </p>
     */
    @NotNull(message = "ID категории обязательно")
    private Long categoryId;

    /**
     * Создает новый товар с указанными параметрами.
     * <p>
     * Конструктор используется для создания товара перед сохранением в базу.
     * Идентификатор {@code id} устанавливается в {@code null} и будет
     * сгенерирован при сохранении.
     * </p>
     *
     * @param name название товара (не может быть {@code null} или пустым)
     * @param quantity количество товара (неотрицательное число)
     * @param price цена товара (неотрицательное число)
     * @param categoryId идентификатор категории (не может быть {@code null})
     * @throws IllegalArgumentException если любой из параметров невалиден
     */
    public Product(String name, int quantity, int price, Long categoryId) {
        this.name = name;
        this.quantity = quantity;
        this.price = price;
        this.categoryId = categoryId;
    }
}